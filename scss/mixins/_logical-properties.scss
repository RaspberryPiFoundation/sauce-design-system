@use 'sass:map';
@use 'sass:meta';
@use 'sass:string';

@mixin apply($property, $value, $fallbacks: []) {
  @if meta.type-of($value) == 'string' and string.slice($value, 1, 2) == '--' {
    $value: var(#{$value});
  }

  @if meta.type-of($fallbacks) == 'string' {
    $fallbacks: [$fallbacks];
  }

  // Define custom property
  --#{$property}: #{$value};

  // Define fallback properties
  @each $fallback in $fallbacks {
    #{$fallback}: var(--#{$property});
  }

  // Define logical property
  #{$property}: var(--#{$property});
}
