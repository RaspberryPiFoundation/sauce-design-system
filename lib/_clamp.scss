@use 'sass:list';
@use 'sass:map';
@use 'sass:meta';

@mixin apply($property, $tokens) {
  @include static($property, $tokens);

  @if (meta.type-of($property) == 'list') {
    @each $sub-property in $property {
      @include apply($sub-property, $tokens);
    }
  } @else {
    $clamp-values: map-get($tokens, clamp);

    $min: map-get($clamp-values, min);
    $target: map-get($clamp-values, target);
    $max: map-get($clamp-values, max);

    #{$property}: clamp($min, $target, $max);
  }
}

@mixin static($property, $tokens) {
  @if (meta.type-of($property) == 'list') {
    @each $sub-property in $property {
      @include static($sub-property, $tokens);
    }
  } @else {
    #{$property}: map-get($tokens, static);
  }
}
